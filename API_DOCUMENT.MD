# üìò Financial Document Analyzer API Documentation

## üîé Overview
The **Financial Document Analyzer API** provides **AI-powered analysis of financial documents (PDFs)**, delivering:

- üìä Financial metrics  
- üí° Investment recommendations  
- ‚ö†Ô∏è Risk assessments  
- üåç Market insights  

The API is built with **FastAPI**, uses **Gemini AI** for intelligence, **Celery + Redis** for asynchronous processing, and **PostgreSQL** for persistent storage.  

---

## üåê Base URL
http://localhost:8000

## üîê Authentication
> **No authentication required** ‚Äì all endpoints are publicly accessible.  
(Pluggable auth can be added for production deployments.)

---

## üì° Endpoints

1Ô∏è‚É£ `GET /`
**Description:** Health check & API information.  

**Response ‚Äì 200 OK**  
```json
{
  "message": "AI Financial Document Analyzer API",
  "version": "1.0.0",
  "status": "operational",
  "timestamp": "2025-08-31T21:44:00.123456Z"
}

2Ô∏è‚É£ GET /health

Description: System health check for database and AI services.

Response ‚Äì 200 Healthy

{
  "status": "healthy",
  "database": "connected",
  "ai_service": "available",
  "timestamp": "2025-08-31T21:44:00.123456Z"
}


Response ‚Äì 200 Unhealthy

{
  "status": "unhealthy",
  "error": "Database connection failed",
  "timestamp": "2025-08-31T21:44:00.123456Z"
}

3Ô∏è‚É£ POST /analyze

Description: Queues a financial document for comprehensive AI analysis (async, Celery).

Parameters:

file (PDF, required) ‚Äì Financial document

query (string, optional) ‚Äì Custom analysis query

Default: "Analyze this financial document for investment insights"

Response ‚Äì 200 OK

{
  "status": "queued",
  "task_id": "123e4567-e89b-12d3-a456-426614174000",
  "message": "Analysis queued for processing",
  "estimated_time": "2-5 minutes"
}


Errors:

400 ‚Äì Invalid file type

500 ‚Äì Analysis failure

Example:

curl -X POST "http://localhost:8000/analyze" \
  -F "file=@sample.pdf" \
  -F "query=Analyze for investment insights"

4Ô∏è‚É£ POST /analyze-fast

Description: Performs immediate AI analysis (synchronous).

Parameters: Same as /analyze.

Response ‚Äì 200 OK

{
  "status": "completed",
  "task_id": "123e4567-e89b-12d3-a456-426614174000",
  "result": {
    "company_name": "Example Corp",
    "financial_metrics": {
      "revenue": 22496,
      "net_income": 1172,
      "total_assets": 128567,
      "operating_cash_flow": 4567,
      "profit_margin": 17.2,
      "debt_to_equity": null,
      "eps": null
    },
    "investment_recommendations": [
      {
        "action": "buy",
        "asset": "Example Corp stock",
        "rationale": "Strong revenue growth with no significant debt reported.",
        "risk_level": "Low",
        "confidence": 0.85
      }
    ],
    "risk_assessments": [
      {
        "category": "Market Risk",
        "level": "Medium",
        "description": "General market volatility affects all investments",
        "mitigation": "Diversify portfolio"
      }
    ],
    "market_insights": ["Market analysis requires additional data"],
    "summary": "Financial Analysis Summary for Example Corp..."
  },
  "processing_time": "2.34s"
}


Errors:

400 ‚Äì Invalid file type

500 ‚Äì Analysis failure

5Ô∏è‚É£ GET /analysis/{task_id}

Description: Retrieves status & results of a queued analysis.

Parameters:

task_id (string, required)

Response ‚Äì 200 OK

{
  "task_id": "123e4567-e89b-12d3-a456-426614174000",
  "status": "completed",
  "filename": "sample.pdf",
  "query": "Analyze for investment insights",
  "created_at": "2025-08-31T21:44:00.123456Z",
  "completed_at": "2025-08-31T21:46:00.123456Z",
  "result": {...},
  "error_message": null
}


Errors:

404 ‚Äì Task not found

500 ‚Äì Server error

6Ô∏è‚É£ GET /analyses

Description: Retrieves recent analysis records.

Parameters:

limit (int, optional) ‚Äì Number of records (default: 10)

Response ‚Äì 200 OK

{
  "analyses": [
    {
      "task_id": "123e4567-e89b-12d3-a456-426614174000",
      "status": "completed",
      "filename": "sample.pdf",
      ...
    }
  ],
  "total": 1
}

7Ô∏è‚É£ DELETE /analysis/{task_id}

Description: Deletes an analysis record.

Response ‚Äì 200 OK

{
  "message": "Analysis 123e4567-e89b-12d3-a456-426614174000 deleted successfully"
}


Errors:

404 ‚Äì Task not found

500 ‚Äì Server error

8Ô∏è‚É£ GET /stats

Description: Retrieves system statistics.

Response ‚Äì 200 OK

{
  "total_analyses": 10,
  "completed": 8,
  "failed": 2,
  "success_rate": "80.0%"
}

üö® Error Codes

400 Bad Request ‚Äì Invalid input (e.g., non-PDF file)

404 Not Found ‚Äì Resource not found (invalid task_id)

500 Internal Server Error ‚Äì Unexpected system failure

üîÑ Example Workflow

Queue Analysis

curl -X POST "http://localhost:8000/analyze" \
  -F "file=@sample.pdf" \
  -F "query=Analyze for investment insights"


‚úÖ Response:

{"status": "queued", "task_id": "123e4567-e89b-12d3-a456-426614174000"}


Check Status

curl "http://localhost:8000/analysis/123e4567-e89b-12d3-a456-426614174000"


View Recent Analyses

curl "http://localhost:8000/analyses?limit=5"